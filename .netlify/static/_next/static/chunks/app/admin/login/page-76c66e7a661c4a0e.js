(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2116],{1704:(e,r,t)=>{"use strict";t.d(r,{R2:()=>o,tn:()=>n});var a=t(45404),s=t(56104);let i=["julianmjavierm@gmail.com"];function n(e){return{uid:e.uid,email:e.email,displayName:e.displayName,isAdmin:!!e.email&&i.includes(e.email)}}let o={async signIn(e,r){try{let t=await (0,a.x9)(s.j2,e,r),i=n(t.user);if(!i.isAdmin)throw await (0,a.CI)(s.j2),Error("Access denied. Admin privileges required.");return i}catch(e){throw console.error("Sign in error:",e),Error(e.message||"Failed to sign in")}},async signOut(){try{await (0,a.CI)(s.j2)}catch(e){throw console.error("Sign out error:",e),Error(e.message||"Failed to sign out")}},async createUser(e,r){try{let t=await (0,a.eJ)(s.j2,e,r),i=n(t.user);if(!i.isAdmin)throw await t.user.delete(),Error("Access denied. Admin privileges required.");return i}catch(e){throw console.error("Create user error:",e),Error(e.message||"Failed to create user")}},async handleSessionExpiry(){try{await (0,a.CI)(s.j2),window.location.href="/admin/login"}catch(e){console.error("Session expiry handling error:",e)}},getCurrentUser:()=>new Promise(e=>{let r=(0,a.hg)(s.j2,t=>{r(),e(t)})}),async isCurrentUserAdmin(){let e=await this.getCurrentUser();return!!e&&!!e.email&&i.includes(e.email)}}},30285:(e,r,t)=>{"use strict";t.d(r,{$:()=>l});var a=t(95155),s=t(12115),i=t(74466),n=t(59434);let o=(0,i.F)("inline-flex items-center justify-center font-medium rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none",{variants:{variant:{default:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500",destructive:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",outline:"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 focus:ring-blue-500",secondary:"bg-gray-100 text-gray-900 hover:bg-gray-200 focus:ring-gray-500",ghost:"text-gray-700 hover:bg-gray-100 focus:ring-gray-500",link:"text-blue-600 underline-offset-4 hover:underline focus:ring-blue-500"},size:{default:"h-10 py-2 px-4",sm:"h-9 px-3 text-sm",lg:"h-11 px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=s.forwardRef((e,r)=>{let{className:t,variant:s,size:i,asChild:l=!1,...d}=e;return(0,a.jsx)("button",{className:(0,n.cn)(o({variant:s,size:i,className:t})),ref:r,...d})});l.displayName="Button"},34811:(e,r,t)=>{Promise.resolve().then(t.bind(t,75430))},35695:(e,r,t)=>{"use strict";var a=t(18999);t.o(a,"useRouter")&&t.d(r,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(r,{useSearchParams:function(){return a.useSearchParams}})},56104:(e,r,t)=>{"use strict";t.d(r,{Lf:()=>g,c7:()=>p,j2:()=>c,xI:()=>f});var a=t(23915),s=t(35317),i=t(45404),n=t(77505);let o={apiKey:"AIzaSyDQTtlEowOBdeDj-StcrlnscogXpmy52x4",authDomain:"heiwahousedashboard.firebaseapp.com",projectId:"heiwahousedashboard",storageBucket:"heiwahousedashboard.firebasestorage.app",messagingSenderId:"123456789012",appId:"1:123456789012:web:abcdef1234567890123456",measurementId:"G-ABCDEFGHIJK"},l=null,d=null,c=null,u=null,m=!1;function h(){if(!m)try{o.apiKey&&o.projectId?(l=(0,a.Dk)().length?(0,a.Dk)()[0]:(0,a.Wp)(o),d=(0,s.aU)(l),c=(0,i.xI)(l),u=(0,n.c7)(l),m=!0,console.log("Firebase initialized successfully with real credentials")):(console.warn("Firebase config is missing - using demo mode"),l={},d={},c={},u={},m=!0)}catch(e){console.warn("Failed to initialize Firebase:",e),l={},d={},c={},u={},m=!0}}function f(){return c||h(),c}function g(){return d}function p(){return u}h()},59434:(e,r,t)=>{"use strict";t.d(r,{cn:()=>i});var a=t(52596),s=t(39688);function i(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,s.QP)((0,a.$)(r))}},62523:(e,r,t)=>{"use strict";t.d(r,{p:()=>n});var a=t(95155),s=t(12115),i=t(59434);let n=s.forwardRef((e,r)=>{let{className:t,type:s,...n}=e;return(0,a.jsx)("input",{type:s,className:(0,i.cn)("flex h-10 w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm ring-offset-white file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...n})});n.displayName="Input"},64541:(e,r,t)=>{"use strict";t.d(r,{A:()=>c,AuthProvider:()=>d});var a=t(95155),s=t(12115),i=t(8731),n=t(45404),o=t(1704);let l=(0,s.createContext)(void 0);function d(e){let{children:r}=e,[t,d]=(0,s.useState)(!1),[c,u]=(0,s.useState)(null),m=(0,s.useMemo)(()=>{try{return(0,n.xI)()}catch(e){return console.warn("Failed to get Firebase auth:",e),null}},[]),[h,f,g]=(0,i.hD)(m);(0,s.useEffect)(()=>{d(!0);{let e=document.cookie.split("; ").find(e=>e.startsWith("firebase-token="));e&&e.split("=")[1]||(m&&m.signOut().catch(console.warn),window.location.pathname.includes("/login")||(window.location.href="/admin/login"))}},[m]),(0,s.useEffect)(()=>{if(h&&m){u((0,o.tn)(h)),(async()=>{try{let e=await h.getIdToken();e&&"undefined"!=typeof document&&(document.cookie="firebase-token=".concat(e,"; path=/; max-age=3600; secure; samesite=strict"))}catch(e){console.error("Failed to set auth cookie:",e)}})();let e=setInterval(async()=>{try{let e=await h.getIdToken(!0);e&&"undefined"!=typeof document?document.cookie="firebase-token=".concat(e,"; path=/; max-age=3600; secure; samesite=strict"):await o.R2.handleSessionExpiry()}catch(e){console.error("Token refresh failed:",e),await o.R2.handleSessionExpiry()}},18e5);return()=>clearInterval(e)}u(null),"undefined"!=typeof document&&(document.cookie="firebase-token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT")},[h,m]);let p=async()=>{"undefined"!=typeof document&&(document.cookie="firebase-token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT"),m&&await m.signOut()};return(0,a.jsx)(l.Provider,{value:{user:c,loading:!t||f||!m,error:g,signOut:p},children:r})}function c(){let e=(0,s.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},66695:(e,r,t)=>{"use strict";t.d(r,{BT:()=>d,Wu:()=>c,ZB:()=>l,Zp:()=>n,aR:()=>o});var a=t(95155),s=t(12115),i=t(59434);let n=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,i.cn)("rounded-lg border border-gray-200 bg-white text-gray-950 shadow-sm",t),...s})});n.displayName="Card";let o=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",t),...s})});o.displayName="CardHeader";let l=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("h3",{ref:r,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",t),...s})});l.displayName="CardTitle";let d=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("p",{ref:r,className:(0,i.cn)("text-sm text-gray-500",t),...s})});d.displayName="CardDescription";let c=s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,i.cn)("p-6 pt-0",t),...s})});c.displayName="CardContent",s.forwardRef((e,r)=>{let{className:t,...s}=e;return(0,a.jsx)("div",{ref:r,className:(0,i.cn)("flex items-center p-6 pt-0",t),...s})}).displayName="CardFooter"},75430:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>m});var a=t(95155),s=t(12115),i=t(35695),n=t(64541),o=t(1704),l=t(30285),d=t(62523),c=t(66695),u=t(38543);function m(){let[e,r]=(0,s.useState)(""),[t,m]=(0,s.useState)(""),[h,f]=(0,s.useState)(!1),[g,p]=(0,s.useState)(0),x=(0,i.useRouter)(),{user:y,loading:b}=(0,n.A)();if((null==y?void 0:y.isAdmin)&&!b)return x.push("/admin"),null;let w=async(e,r)=>{try{await o.R2.signIn(e,r),u.oR.success("Login successful!"),x.push("/admin")}catch(a){let t=a.message||"Failed to sign in";if((t.includes("network")||t.includes("timeout"))&&g<2){u.oR.error("Network error, retrying..."),p(e=>e+1),setTimeout(()=>w(e,r),2e3);return}throw u.oR.error(t),a}},v=async r=>{r.preventDefault(),f(!0),p(0);try{await w(e,t)}catch(e){}finally{f(!1)}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"mx-auto h-12 w-12 bg-blue-600 rounded-lg flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white font-bold text-xl","aria-label":"Heiwa House Logo",children:"H"})}),(0,a.jsx)("h1",{className:"mt-6 text-3xl font-bold text-gray-900",children:"Admin Dashboard"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Sign in to access the admin panel"})]}),(0,a.jsxs)(c.Zp,{role:"main","aria-label":"Login form",children:[(0,a.jsxs)(c.aR,{children:[(0,a.jsx)(c.ZB,{children:"Sign In"}),(0,a.jsx)(c.BT,{children:"Enter your admin credentials to continue"})]}),(0,a.jsxs)(c.Wu,{children:[(0,a.jsxs)("form",{onSubmit:v,className:"space-y-4",noValidate:!0,children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),(0,a.jsx)(d.p,{id:"email",type:"email",value:e,onChange:e=>r(e.target.value),required:!0,placeholder:"admin@heiwahouse.com",className:"w-full","aria-describedby":"email-help",autoComplete:"email",disabled:h}),(0,a.jsx)("p",{id:"email-help",className:"sr-only",children:"Enter your admin email address"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),(0,a.jsx)(d.p,{id:"password",type:"password",value:t,onChange:e=>m(e.target.value),required:!0,placeholder:"Enter your password",className:"w-full","aria-describedby":"password-help",autoComplete:"current-password",disabled:h}),(0,a.jsx)("p",{id:"password-help",className:"sr-only",children:"Enter your admin password"})]}),(0,a.jsx)(l.$,{type:"submit",disabled:h||!e||!t,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:opacity-50","aria-label":h?"Signing in...":"Sign In",children:h?"Signing in...":"Sign In"})]}),(0,a.jsx)("div",{className:"mt-6 text-center",children:(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["Only authorized admin users can access this dashboard.",(0,a.jsx)("br",{}),"Contact your administrator if you need access."]})})]})]})]})}),(0,a.jsx)(u.N9,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light"})]})}t(85716)},85716:()=>{}},e=>{e.O(0,[4797,9135,3965,5003,6072,8543,8731,8441,5964,7358],()=>e(e.s=34811)),_N_E=e.O()}]);