(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7581],{1704:(e,t,r)=>{"use strict";r.d(t,{R2:()=>o,tn:()=>s});var n=r(45404),a=r(56104);let i=["julianmjavierm@gmail.com"];function s(e){return{uid:e.uid,email:e.email,displayName:e.displayName,isAdmin:!!e.email&&i.includes(e.email)}}let o={async signIn(e,t){try{let r=await (0,n.x9)(a.j2,e,t),i=s(r.user);if(!i.isAdmin)throw await (0,n.CI)(a.j2),Error("Access denied. Admin privileges required.");return i}catch(e){throw console.error("Sign in error:",e),Error(e.message||"Failed to sign in")}},async signOut(){try{await (0,n.CI)(a.j2)}catch(e){throw console.error("Sign out error:",e),Error(e.message||"Failed to sign out")}},async createUser(e,t){try{let r=await (0,n.eJ)(a.j2,e,t),i=s(r.user);if(!i.isAdmin)throw await r.user.delete(),Error("Access denied. Admin privileges required.");return i}catch(e){throw console.error("Create user error:",e),Error(e.message||"Failed to create user")}},async handleSessionExpiry(){try{await (0,n.CI)(a.j2),window.location.href="/admin/login"}catch(e){console.error("Session expiry handling error:",e)}},getCurrentUser:()=>new Promise(e=>{let t=(0,n.hg)(a.j2,r=>{t(),e(r)})}),async isCurrentUserAdmin(){let e=await this.getCurrentUser();return!!e&&!!e.email&&i.includes(e.email)}}},11914:(e,t,r)=>{Promise.resolve().then(r.bind(r,63756))},30285:(e,t,r)=>{"use strict";r.d(t,{$:()=>l});var n=r(95155),a=r(12115),i=r(74466),s=r(59434);let o=(0,i.F)("inline-flex items-center justify-center font-medium rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none",{variants:{variant:{default:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500",destructive:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",outline:"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 focus:ring-blue-500",secondary:"bg-gray-100 text-gray-900 hover:bg-gray-200 focus:ring-gray-500",ghost:"text-gray-700 hover:bg-gray-100 focus:ring-gray-500",link:"text-blue-600 underline-offset-4 hover:underline focus:ring-blue-500"},size:{default:"h-10 py-2 px-4",sm:"h-9 px-3 text-sm",lg:"h-11 px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=a.forwardRef((e,t)=>{let{className:r,variant:a,size:i,asChild:l=!1,...c}=e;return(0,n.jsx)("button",{className:(0,s.cn)(o({variant:a,size:i,className:r})),ref:t,...c})});l.displayName="Button"},35695:(e,t,r)=>{"use strict";var n=r(18999);r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useSearchParams")&&r.d(t,{useSearchParams:function(){return n.useSearchParams}})},56104:(e,t,r)=>{"use strict";r.d(t,{Lf:()=>g,c7:()=>x,j2:()=>d,xI:()=>f});var n=r(23915),a=r(35317),i=r(45404),s=r(77505);let o={apiKey:"AIzaSyDQTtlEowOBdeDj-StcrlnscogXpmy52x4",authDomain:"heiwahousedashboard.firebaseapp.com",projectId:"heiwahousedashboard",storageBucket:"heiwahousedashboard.firebasestorage.app",messagingSenderId:"123456789012",appId:"1:123456789012:web:abcdef1234567890123456",measurementId:"G-ABCDEFGHIJK"},l=null,c=null,d=null,u=null,m=!1;function h(){if(!m)try{o.apiKey&&o.projectId?(l=(0,n.Dk)().length?(0,n.Dk)()[0]:(0,n.Wp)(o),c=(0,a.aU)(l),d=(0,i.xI)(l),u=(0,s.c7)(l),m=!0,console.log("Firebase initialized successfully with real credentials")):(console.warn("Firebase config is missing - using demo mode"),l={},c={},d={},u={},m=!0)}catch(e){console.warn("Failed to initialize Firebase:",e),l={},c={},d={},u={},m=!0}}function f(){return d||h(),d}function g(){return c}function x(){return u}h()},59434:(e,t,r)=>{"use strict";r.d(t,{cn:()=>i});var n=r(52596),a=r(39688);function i(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.QP)((0,n.$)(t))}},63756:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>j});var n=r(95155),a=r(6874),i=r.n(a),s=r(12115),o=r(35695),l=r(30285),c=r(64541),d=r(38543);r(85716),r(86812);let u=s.forwardRef(function(e,t){let{title:r,titleId:n,...a}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},a),r?s.createElement("title",{id:n},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}),m=s.forwardRef(function(e,t){let{title:r,titleId:n,...a}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},a),r?s.createElement("title",{id:n},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"}))}),h=s.forwardRef(function(e,t){let{title:r,titleId:n,...a}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},a),r?s.createElement("title",{id:n},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 21h16.5M4.5 3h15M5.25 3v18m13.5-18v18M9 6.75h1.5m-1.5 3h1.5m-1.5 3h1.5m3-6H15m-1.5 3H15m-1.5 3H15M9 21v-3.375c0-.621.504-1.125 1.125-1.125h3.75c.621 0 1.125.504 1.125 1.125V21"}))}),f=s.forwardRef(function(e,t){let{title:r,titleId:n,...a}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},a),r?s.createElement("title",{id:n},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 7.5-9-5.25L3 7.5m18 0-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9"}))}),g=s.forwardRef(function(e,t){let{title:r,titleId:n,...a}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},a),r?s.createElement("title",{id:n},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))}),x=s.forwardRef(function(e,t){let{title:r,titleId:n,...a}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},a),r?s.createElement("title",{id:n},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25ZM6.75 12h.008v.008H6.75V12Zm0 3h.008v.008H6.75V15Zm0 3h.008v.008H6.75V18Z"}))}),w=s.forwardRef(function(e,t){let{title:r,titleId:n,...a}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},a),r?s.createElement("title",{id:n},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}),b=s.forwardRef(function(e,t){let{title:r,titleId:n,...a}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},a),r?s.createElement("title",{id:n},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}),p=s.forwardRef(function(e,t){let{title:r,titleId:n,...a}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},a),r?s.createElement("title",{id:n},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"}))});class v extends s.Component{static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("Admin dashboard error:",e,t)}render(){return this.state.hasError?(0,n.jsx)("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("h2",{className:"text-2xl font-bold text-white mb-4",children:"Something went wrong"}),(0,n.jsx)("p",{className:"text-gray-400 mb-6",children:"An error occurred while loading the admin dashboard."}),(0,n.jsxs)("div",{className:"space-x-4",children:[(0,n.jsx)("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Try again"}),(0,n.jsx)(i(),{href:"/",className:"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700 inline-block",children:"Go to Home"})]})]})}):this.props.children}constructor(e){super(e),this.state={hasError:!1}}}let y=[{name:"Dashboard",href:"/admin",icon:u},{name:"Clients",href:"/admin/clients",icon:m},{name:"Surf Camps",href:"/admin/surfcamps",icon:h},{name:"Rooms",href:"/admin/rooms",icon:f},{name:"Add-ons",href:"/admin/addons",icon:f},{name:"Calendar",href:"/admin/calendar",icon:g},{name:"Bookings",href:"/admin/bookings",icon:x}];function j(e){var t;let{children:r}=e,{user:a,signOut:u,loading:m}=(0,c.A)(),h=(0,o.useRouter)(),[f,g]=(0,s.useState)(!1),[x,j]=(0,s.useState)(!1),[k,N]=(0,s.useState)(!1),[E,C]=(0,s.useState)(!1);(0,s.useEffect)(()=>{N(!0)},[]);let A=()=>{C(!0),g(!1),setTimeout(()=>C(!1),300)};if(m||!k)return(0,n.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,n.jsx)("p",{className:"text-gray-600",children:"Loading admin dashboard..."}),!k&&(0,n.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Initializing Firebase..."})]})});let M=async()=>{try{await u(),h.push("/admin/login")}catch(e){console.error("Logout error:",e)}};return(0,n.jsxs)(v,{children:[(0,n.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[f&&(0,n.jsx)("div",{className:"\n              fixed inset-0 z-40 bg-gray-600 bg-opacity-75\n              transition-opacity duration-300 ease-in-out\n              md:hidden\n              ".concat(E?"opacity-100":"opacity-0","\n            "),onClick:A,"aria-hidden":"true",role:"presentation"}),(0,n.jsxs)("div",{className:"\n            fixed inset-y-0 left-0 bg-white shadow-lg\n            transition-transform duration-300 ease-in-out\n            ".concat(f?"translate-x-0":"-translate-x-full","\n            ").concat(x?"md:w-16":"md:w-64","\n            ").concat(f?"z-50 md:z-30":"z-30","\n            md:translate-x-0\n          "),style:{width:x?"4rem":"16rem",willChange:E?"transform":"auto"},children:[(0,n.jsxs)("div",{className:"flex items-center justify-between h-16 px-4 bg-blue-600",children:[(0,n.jsxs)(i(),{href:"/admin",className:"flex items-center space-x-3 ".concat(x?"justify-center":""),children:[(0,n.jsx)("div",{className:"w-8 h-8 bg-white rounded-lg flex items-center justify-center flex-shrink-0",children:(0,n.jsx)("span",{className:"text-blue-600 font-bold text-sm",children:"H"})}),!x&&(0,n.jsx)("span",{className:"text-white font-semibold text-lg truncate",children:"Heiwa House"})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("button",{onClick:()=>{C(!0),j(!x),setTimeout(()=>C(!1),300)},className:"hidden md:block text-white hover:text-gray-200 p-1 rounded transition-colors duration-200",title:x?"Expand sidebar":"Collapse sidebar","aria-label":x?"Expand sidebar":"Collapse sidebar","aria-expanded":!x,children:(0,n.jsx)(w,{className:"h-5 w-5 transition-transform duration-300 ".concat(x?"rotate-180":"")})}),(0,n.jsx)("button",{onClick:A,className:"md:hidden text-white hover:text-gray-200 transition-colors duration-200","aria-label":"Close sidebar",children:(0,n.jsx)(b,{className:"h-6 w-6"})})]})]}),(0,n.jsx)("nav",{className:"mt-8","aria-label":"Navigation menu",children:(0,n.jsx)("div",{className:"".concat(x?"px-2":"px-4"," space-y-2"),children:y.map(e=>(0,n.jsxs)(i(),{href:e.href,className:"\n                    flex items-center py-3 text-sm font-medium text-gray-700 rounded-lg\n                    hover:bg-gray-100 hover:text-blue-600 transition-all duration-200 ease-in-out\n                    ".concat(x?"px-3 justify-center":"px-4","\n                  "),onClick:A,title:x?e.name:"","aria-label":"Navigate to ".concat(e.name),children:[(0,n.jsx)(e.icon,{className:"".concat(x?"h-6 w-6":"mr-3 h-5 w-5")}),!x&&e.name]},e.name))})})]}),(0,n.jsxs)("div",{className:"\n            min-h-screen ml-0\n            transition-margin duration-300 ease-in-out\n            ".concat(x?"md:ml-16":"md:ml-64","\n          "),style:{willChange:E?"margin-left":"auto"},children:[(0,n.jsx)("header",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,n.jsxs)("div",{className:"flex items-center justify-between h-16 px-6",children:[(0,n.jsx)("button",{onClick:()=>{C(!0),g(!f),setTimeout(()=>C(!1),300)},className:"md:hidden text-gray-500 hover:text-gray-700 transition-colors duration-200","aria-label":"Open sidebar menu","aria-expanded":f,children:(0,n.jsx)(w,{className:"h-6 w-6"})}),(0,n.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center",children:(0,n.jsx)("span",{className:"text-gray-600 font-medium text-sm",children:null==a||null==(t=a.email)?void 0:t.charAt(0).toUpperCase()})}),(0,n.jsx)("span",{className:"text-gray-700 font-medium",children:null==a?void 0:a.email})]}),(0,n.jsxs)(l.$,{onClick:M,variant:"outline",size:"sm",className:"flex items-center space-x-2","aria-label":"Sign out",children:[(0,n.jsx)(p,{className:"h-4 w-4"}),(0,n.jsx)("span",{children:"Logout"})]})]})]})}),(0,n.jsx)("main",{className:"p-6",children:r})]})]}),(0,n.jsx)(d.N9,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light"})]})}},64541:(e,t,r)=>{"use strict";r.d(t,{A:()=>d,AuthProvider:()=>c});var n=r(95155),a=r(12115),i=r(8731),s=r(45404),o=r(1704);let l=(0,a.createContext)(void 0);function c(e){let{children:t}=e,[r,c]=(0,a.useState)(!1),[d,u]=(0,a.useState)(null),m=(0,a.useMemo)(()=>{try{return(0,s.xI)()}catch(e){return console.warn("Failed to get Firebase auth:",e),null}},[]),[h,f,g]=(0,i.hD)(m);(0,a.useEffect)(()=>{c(!0);{let e=document.cookie.split("; ").find(e=>e.startsWith("firebase-token="));e&&e.split("=")[1]||(m&&m.signOut().catch(console.warn),window.location.pathname.includes("/login")||(window.location.href="/admin/login"))}},[m]),(0,a.useEffect)(()=>{if(h&&m){u((0,o.tn)(h)),(async()=>{try{let e=await h.getIdToken();e&&"undefined"!=typeof document&&(document.cookie="firebase-token=".concat(e,"; path=/; max-age=3600; secure; samesite=strict"))}catch(e){console.error("Failed to set auth cookie:",e)}})();let e=setInterval(async()=>{try{let e=await h.getIdToken(!0);e&&"undefined"!=typeof document?document.cookie="firebase-token=".concat(e,"; path=/; max-age=3600; secure; samesite=strict"):await o.R2.handleSessionExpiry()}catch(e){console.error("Token refresh failed:",e),await o.R2.handleSessionExpiry()}},18e5);return()=>clearInterval(e)}u(null),"undefined"!=typeof document&&(document.cookie="firebase-token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT")},[h,m]);let x=async()=>{"undefined"!=typeof document&&(document.cookie="firebase-token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT"),m&&await m.signOut()};return(0,n.jsx)(l.Provider,{value:{user:d,loading:!r||f||!m,error:g,signOut:x},children:t})}function d(){let e=(0,a.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},85716:()=>{},86812:()=>{}},e=>{e.O(0,[4797,9957,9135,3965,5003,6072,8543,6874,8731,8441,5964,7358],()=>e(e.s=11914)),_N_E=e.O()}]);