(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7177],{1704:(e,t,r)=>{"use strict";r.d(t,{R2:()=>s,tn:()=>o});var i=r(45404),n=r(56104);let a=["julianmjavierm@gmail.com"];function o(e){return{uid:e.uid,email:e.email,displayName:e.displayName,isAdmin:!!e.email&&a.includes(e.email)}}let s={async signIn(e,t){try{let r=await (0,i.x9)(n.j2,e,t),a=o(r.user);if(!a.isAdmin)throw await (0,i.CI)(n.j2),Error("Access denied. Admin privileges required.");return a}catch(e){throw console.error("Sign in error:",e),Error(e.message||"Failed to sign in")}},async signOut(){try{await (0,i.CI)(n.j2)}catch(e){throw console.error("Sign out error:",e),Error(e.message||"Failed to sign out")}},async createUser(e,t){try{let r=await (0,i.eJ)(n.j2,e,t),a=o(r.user);if(!a.isAdmin)throw await r.user.delete(),Error("Access denied. Admin privileges required.");return a}catch(e){throw console.error("Create user error:",e),Error(e.message||"Failed to create user")}},async handleSessionExpiry(){try{await (0,i.CI)(n.j2),window.location.href="/admin/login"}catch(e){console.error("Session expiry handling error:",e)}},getCurrentUser:()=>new Promise(e=>{let t=(0,i.hg)(n.j2,r=>{t(),e(r)})}),async isCurrentUserAdmin(){let e=await this.getCurrentUser();return!!e&&!!e.email&&a.includes(e.email)}}},15447:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,78346,23)),Promise.resolve().then(r.t.bind(r,30347,23)),Promise.resolve().then(r.bind(r,64541))},30347:()=>{},56104:(e,t,r)=>{"use strict";r.d(t,{Lf:()=>w,c7:()=>g,j2:()=>u,xI:()=>f});var i=r(23915),n=r(35317),a=r(45404),o=r(77505);let s={apiKey:"AIzaSyDQTtlEowOBdeDj-StcrlnscogXpmy52x4",authDomain:"heiwahousedashboard.firebaseapp.com",projectId:"heiwahousedashboard",storageBucket:"heiwahousedashboard.firebasestorage.app",messagingSenderId:"123456789012",appId:"1:123456789012:web:abcdef1234567890123456",measurementId:"G-ABCDEFGHIJK"},c=null,l=null,u=null,d=null,h=!1;function m(){if(!h)try{s.apiKey&&s.projectId?(c=(0,i.Dk)().length?(0,i.Dk)()[0]:(0,i.Wp)(s),l=(0,n.aU)(c),u=(0,a.xI)(c),d=(0,o.c7)(c),h=!0,console.log("Firebase initialized successfully with real credentials")):(console.warn("Firebase config is missing - using demo mode"),c={},l={},u={},d={},h=!0)}catch(e){console.warn("Failed to initialize Firebase:",e),c={},l={},u={},d={},h=!0}}function f(){return u||m(),u}function w(){return l}function g(){return d}m()},64541:(e,t,r)=>{"use strict";r.d(t,{A:()=>u,AuthProvider:()=>l});var i=r(95155),n=r(12115),a=r(8731),o=r(45404),s=r(1704);let c=(0,n.createContext)(void 0);function l(e){let{children:t}=e,[r,l]=(0,n.useState)(!1),[u,d]=(0,n.useState)(null),h=(0,n.useMemo)(()=>{try{return(0,o.xI)()}catch(e){return console.warn("Failed to get Firebase auth:",e),null}},[]),[m,f,w]=(0,a.hD)(h);(0,n.useEffect)(()=>{l(!0);{let e=document.cookie.split("; ").find(e=>e.startsWith("firebase-token="));e&&e.split("=")[1]||(h&&h.signOut().catch(console.warn),window.location.pathname.includes("/login")||(window.location.href="/admin/login"))}},[h]),(0,n.useEffect)(()=>{if(m&&h){d((0,s.tn)(m)),(async()=>{try{let e=await m.getIdToken();e&&"undefined"!=typeof document&&(document.cookie="firebase-token=".concat(e,"; path=/; max-age=3600; secure; samesite=strict"))}catch(e){console.error("Failed to set auth cookie:",e)}})();let e=setInterval(async()=>{try{let e=await m.getIdToken(!0);e&&"undefined"!=typeof document?document.cookie="firebase-token=".concat(e,"; path=/; max-age=3600; secure; samesite=strict"):await s.R2.handleSessionExpiry()}catch(e){console.error("Token refresh failed:",e),await s.R2.handleSessionExpiry()}},18e5);return()=>clearInterval(e)}d(null),"undefined"!=typeof document&&(document.cookie="firebase-token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT")},[m,h]);let g=async()=>{"undefined"!=typeof document&&(document.cookie="firebase-token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT"),h&&await h.signOut()};return(0,i.jsx)(c.Provider,{value:{user:u,loading:!r||f||!h,error:w,signOut:g},children:t})}function u(){let e=(0,n.useContext)(c);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},78346:e=>{e.exports={style:{fontFamily:"'Inter', 'Inter Fallback'",fontStyle:"normal"},className:"__className_e8ce0c"}}},e=>{e.O(0,[3838,9135,3965,6072,8731,8441,5964,7358],()=>e(e.s=15447)),_N_E=e.O()}]);